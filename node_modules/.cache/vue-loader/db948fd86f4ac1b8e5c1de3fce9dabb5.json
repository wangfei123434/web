{"remainingRequest":"C:\\Users\\001\\Desktop\\人才大脑图片\\wxy\\王飞\\项目\\web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\001\\Desktop\\人才大脑图片\\wxy\\王飞\\项目\\web\\src\\views\\login\\ForgetCode.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\001\\Desktop\\人才大脑图片\\wxy\\王飞\\项目\\web\\src\\views\\login\\ForgetCode.vue","mtime":1663034482632},{"path":"C:\\Users\\001\\Desktop\\人才大脑图片\\wxy\\王飞\\项目\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\001\\Desktop\\人才大脑图片\\wxy\\王飞\\项目\\web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\001\\Desktop\\人才大脑图片\\wxy\\王飞\\项目\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\001\\Desktop\\人才大脑图片\\wxy\\王飞\\项目\\web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtb2RpZnlQYXNzd29yZCB9IGZyb20gIi4uLy4uL2FwaS9sb2dpbiI7DQppbXBvcnQgeyB0ZWxDb2RlIH0gZnJvbSAiLi4vLi4vYXBpL3JlZyI7DQppbXBvcnQgew0KICB2YWxpZGF0ZVBhc3MsDQogIHZhbGlkYXRlUGFzczIsDQogIGNoZWNrVGVsLA0KICBjaGVja1NvY2FpYWwNCn0gZnJvbSAiQC91dGlscy92YWwiOw0KZXhwb3J0IGRlZmF1bHQgew0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICByZWdGb3JtOiB7DQogICAgICAgIHRlbDogIiIsDQogICAgICAgIGNhcHRjaGE6ICIiLA0KICAgICAgICBwYXNzOiAiIiwNCiAgICAgICAgY2hlY2tQYXNzOiAiIiwNCiAgICAgICAgdXNjYzogIiINCiAgICAgIH0sDQogICAgICBsb2dpblJ1bGVzOiB7DQogICAgICAgIHBhc3M6IFt7IHZhbGlkYXRvcjogdmFsaWRhdGVQYXNzKHRoaXMpLCB0cmlnZ2VyOiAiYmx1ciIgfV0sDQogICAgICAgIGNoZWNrUGFzczogW3sgdmFsaWRhdG9yOiB2YWxpZGF0ZVBhc3MyKHRoaXMpLCB0cmlnZ2VyOiAiYmx1ciIgfV0sDQogICAgICAgIHRlbDogW3sgdmFsaWRhdG9yOiBjaGVja1RlbCwgdHJpZ2dlcjogImJsdXIiIH1dLA0KICAgICAgICB1c2NjOiBbeyB2YWxpZGF0b3I6IGNoZWNrU29jYWlhbCwgdHJpZ2dlcjogImJsdXIiIH1dDQogICAgICB9LA0KICAgICAgeXptRGlzOiBmYWxzZSwNCiAgICAgIHl6bURpc1RleHQ6ICIxMjBzIiwNCiAgICAgIHl6bVRpbWU6IG51bGwNCiAgICB9Ow0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIC8vIOiuoeeul+a7oeWxj+mrmOW6pg0KICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgdGhpcy5jYWxjRnVsbEhlaWdodCgpOw0KICAgIH0sIDUwMCk7DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBjYWxjRnVsbEhlaWdodCgpIHsNCiAgICAgIGxldCBoID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDsNCiAgICAgIGxldCBoZWFkSCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5oZWFkZXItd3JhcHBlciIpLmNsaWVudEhlaWdodDsNCiAgICAgIGxldCBmb290SCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImZvb3RlciIpLmNsaWVudEhlaWdodDsNCg0KICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmNvbnRlbnQtd3JhcHBlciIpLnN0eWxlLmhlaWdodCA9DQogICAgICAgIGggLSBoZWFkSCAtIGZvb3RIICsgInB4IjsNCiAgICB9LA0KICAgIGFzeW5jIHRlbHBob25lKCkgew0KICAgICAgdGhpcy55em1EaXMgPSB0cnVlOw0KICAgICAgdGhpcy55em1UaW1lID0gc2V0SW50ZXJ2YWwoKCkgPT4gew0KICAgICAgICB0aGlzLnl6bURpc1RleHQgPSBwYXJzZUludCh0aGlzLnl6bURpc1RleHQpIC0gMSArICJzIjsNCiAgICAgICAgaWYgKHBhcnNlSW50KHRoaXMueXptRGlzVGV4dCkgPT0gMCkgew0KICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy55em1UaW1lKTsNCiAgICAgICAgICB0aGlzLnl6bVRpbWUgPSBudWxsOw0KICAgICAgICAgIHRoaXMueXptRGlzVGV4dCA9ICIxMjBzIjsNCiAgICAgICAgICB0aGlzLnl6bURpcyA9IGZhbHNlOw0KICAgICAgICB9DQogICAgICB9LCAxMDAwKTsNCg0KICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHRlbENvZGUoew0KICAgICAgICBwaG9uZTogdGhpcy5yZWdGb3JtLnRlbCwNCiAgICAgICAgdHlwZTogImZvcmdldCINCiAgICAgIH0pOw0KICAgICAgY29uc29sZS5sb2coZGF0YSk7DQogICAgICAvLyB0aGlzLnl6bURpcyA9IGZhbHNlDQogICAgICAvLyBpZih0aGlzLnl6bVRpbWUpIHsNCiAgICAgIC8vICAgY2xlYXJJbnRlcnZhbCh0aGlzLnl6bVRpbWUpDQogICAgICAvLyAgIHRoaXMueXptVGltZSA9IG51bGwNCiAgICAgIC8vICAgdGhpcy55em1EaXNUZXh0ID0gJzYwMHMnDQogICAgICAvLyB9DQoNCiAgICAgIGlmIChkYXRhLmNvZGUgPT0gMjAwKSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhkYXRhLmRhdGEgfHwgZGF0YS5tc2cgfHwgIumqjOivgeeggeW3suWPkemAge+8gSIpOw0KICAgICAgfQ0KICAgIH0sDQoNCiAgICBzdWJtaXRGb3JtKHN0cikgew0KICAgICAgLy8gdGhpcy4kcmVmc1sncnVsZUZvcm0nXSAgPT09ICB0aGlzLiRyZWZzLnJ1bGVGb3JtDQogICAgICB0aGlzLiRyZWZzW3N0cl0udmFsaWRhdGUoYXN5bmMgdmFsaWQgPT4gew0KICAgICAgICBpZiAodmFsaWQpIHsNCiAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgbW9kaWZ5UGFzc3dvcmQoew0KICAgICAgICAgICAgY29kZTogdGhpcy5yZWdGb3JtLmNhcHRjaGEsDQogICAgICAgICAgICBlblBhYXN3b3JkOiB0aGlzLnJlZ0Zvcm0uY2hlY2tQYXNzLA0KICAgICAgICAgICAgbmV3UGFzc3dvcmQ6IHRoaXMucmVnRm9ybS5wYXNzLA0KICAgICAgICAgICAgcGhvbmU6IHRoaXMucmVnRm9ybS50ZWwsDQogICAgICAgICAgICB1c2NjOiB0aGlzLnJlZ0Zvcm0udXNjYw0KICAgICAgICAgIH0pOw0KICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpOw0KICAgICAgICAgIGlmIChkYXRhLmNvZGUgPT0gMjAwKSB7DQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgibG9naW4iKTsNCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgY29uc29sZS5sb2coIuihqOWNleS4jemAmui/h+agoemqjCIpOw0KICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfQ0KICB9DQp9Ow0K"},{"version":3,"sources":["ForgetCode.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ForgetCode.vue","sourceRoot":"src/views/login","sourcesContent":["<template>\r\n  <div class=\"forget-big-box\">\r\n    <div class=\"top-banner\">\r\n      <img\r\n        class=\"banner-image\"\r\n        src=\"../../assets/imgs/wfimg/home-banner.png\"\r\n        alt=\"\"\r\n      />\r\n    </div>\r\n    <div class=\"content-wrapper\">\r\n      <div class=\"title\" style=\"margin: 50px;\">\r\n        <h3 style=\"font-size:20px\">重置密码</h3>\r\n      </div>\r\n      <div class=\"main-box\" style=\"width:600px; margin-left: 250px\">\r\n        <el-form\r\n          :model=\"regForm\"\r\n          status-icon\r\n          :rules=\"loginRules\"\r\n          ref=\"regForm\"\r\n          label-width=\"100px\"\r\n          class=\"demo-ruleForm\"\r\n        >\r\n          <el-form-item label=\"手机号\" prop=\"tel\">\r\n            <el-input\r\n              v-model=\"regForm.tel\"\r\n              placeholder=\"请输入手机号\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item\r\n            label=\"统一社会信用代码\"\r\n            prop=\"uscc\"\r\n            v-if=\"$route.query.type == 'ENTERPRISE'\"\r\n          >\r\n            <el-input\r\n              v-model=\"regForm.uscc\"\r\n              placeholder=\"请输入统一社会信用代码\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"验证码\" prop=\"captcha\">\r\n            <el-input\r\n              v-model=\"regForm.captcha\"\r\n              autocomplete=\"off\"\r\n              placeholder=\"请输入验证码\"\r\n              ><el-button\r\n                slot=\"append\"\r\n                style=\"backgroundColor:#1b9af7;color:white\"\r\n                @click=\"telphone\"\r\n                :disabled=\"yzmDis\"\r\n                >{{ yzmDis ? yzmDisText : \"发送验证码\" }}</el-button\r\n              >\r\n            </el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"密码\" prop=\"pass\">\r\n            <el-input\r\n              type=\"password\"\r\n              v-model=\"regForm.pass\"\r\n              autocomplete=\"off\"\r\n              placeholder=\"8-16位大小写字母加数字\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"确认密码\" prop=\"checkPass\">\r\n            <el-input\r\n              type=\"password\"\r\n              v-model=\"regForm.checkPass\"\r\n              autocomplete=\"off\"\r\n              placeholder=\"8-16位大小写字母加数字\"\r\n            ></el-input>\r\n          </el-form-item>\r\n\r\n          <el-form-item>\r\n            <el-button\r\n              type=\"primary\"\r\n              @click=\"submitForm('regForm')\"\r\n              style=\"backgroundColor:#1b9af7;color:white\"\r\n              >提交</el-button\r\n            >\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { modifyPassword } from \"../../api/login\";\r\nimport { telCode } from \"../../api/reg\";\r\nimport {\r\n  validatePass,\r\n  validatePass2,\r\n  checkTel,\r\n  checkSocaial\r\n} from \"@/utils/val\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      regForm: {\r\n        tel: \"\",\r\n        captcha: \"\",\r\n        pass: \"\",\r\n        checkPass: \"\",\r\n        uscc: \"\"\r\n      },\r\n      loginRules: {\r\n        pass: [{ validator: validatePass(this), trigger: \"blur\" }],\r\n        checkPass: [{ validator: validatePass2(this), trigger: \"blur\" }],\r\n        tel: [{ validator: checkTel, trigger: \"blur\" }],\r\n        uscc: [{ validator: checkSocaial, trigger: \"blur\" }]\r\n      },\r\n      yzmDis: false,\r\n      yzmDisText: \"120s\",\r\n      yzmTime: null\r\n    };\r\n  },\r\n  mounted() {\r\n    // 计算满屏高度\r\n    setTimeout(() => {\r\n      this.calcFullHeight();\r\n    }, 500);\r\n  },\r\n  methods: {\r\n    calcFullHeight() {\r\n      let h = document.documentElement.clientHeight;\r\n      let headH = document.querySelector(\".header-wrapper\").clientHeight;\r\n      let footH = document.querySelector(\"footer\").clientHeight;\r\n\r\n      document.querySelector(\".content-wrapper\").style.height =\r\n        h - headH - footH + \"px\";\r\n    },\r\n    async telphone() {\r\n      this.yzmDis = true;\r\n      this.yzmTime = setInterval(() => {\r\n        this.yzmDisText = parseInt(this.yzmDisText) - 1 + \"s\";\r\n        if (parseInt(this.yzmDisText) == 0) {\r\n          clearInterval(this.yzmTime);\r\n          this.yzmTime = null;\r\n          this.yzmDisText = \"120s\";\r\n          this.yzmDis = false;\r\n        }\r\n      }, 1000);\r\n\r\n      const data = await telCode({\r\n        phone: this.regForm.tel,\r\n        type: \"forget\"\r\n      });\r\n      console.log(data);\r\n      // this.yzmDis = false\r\n      // if(this.yzmTime) {\r\n      //   clearInterval(this.yzmTime)\r\n      //   this.yzmTime = null\r\n      //   this.yzmDisText = '600s'\r\n      // }\r\n\r\n      if (data.code == 200) {\r\n        this.$message.success(data.data || data.msg || \"验证码已发送！\");\r\n      }\r\n    },\r\n\r\n    submitForm(str) {\r\n      // this.$refs['ruleForm']  ===  this.$refs.ruleForm\r\n      this.$refs[str].validate(async valid => {\r\n        if (valid) {\r\n          const data = await modifyPassword({\r\n            code: this.regForm.captcha,\r\n            enPaasword: this.regForm.checkPass,\r\n            newPassword: this.regForm.pass,\r\n            phone: this.regForm.tel,\r\n            uscc: this.regForm.uscc\r\n          });\r\n          console.log(data);\r\n          if (data.code == 200) {\r\n            this.$router.push(\"login\");\r\n          }\r\n        } else {\r\n          console.log(\"表单不通过校验\");\r\n          return false;\r\n        }\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.forget-big-box {\r\n  margin-top: -94px;\r\n  .top-banner {\r\n    width: 100%;\r\n    height: 259px;\r\n    .banner-image {\r\n      display: block;\r\n      width: 100%;\r\n      height: 260px;\r\n    }\r\n  }\r\n}\r\n// 版心\r\n.content-wrapper {\r\n  width: 1200px;\r\n  margin: 0 auto;\r\n  overflow: auto;\r\n}\r\n</style>\r\n"]}]}