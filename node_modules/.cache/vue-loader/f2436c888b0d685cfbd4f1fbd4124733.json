{"remainingRequest":"C:\\Users\\001\\Desktop\\人才大脑图片\\wxy\\王飞\\项目\\web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\001\\Desktop\\人才大脑图片\\wxy\\王飞\\项目\\web\\src\\views\\personal\\ComList.vue?vue&type=style&index=0&id=f25b262c&lang=less&scoped=true&","dependencies":[{"path":"C:\\Users\\001\\Desktop\\人才大脑图片\\wxy\\王飞\\项目\\web\\src\\views\\personal\\ComList.vue","mtime":1658367490869},{"path":"C:\\Users\\001\\Desktop\\人才大脑图片\\wxy\\王飞\\项目\\web\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\001\\Desktop\\人才大脑图片\\wxy\\王飞\\项目\\web\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\001\\Desktop\\人才大脑图片\\wxy\\王飞\\项目\\web\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\001\\Desktop\\人才大脑图片\\wxy\\王飞\\项目\\web\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\001\\Desktop\\人才大脑图片\\wxy\\王飞\\项目\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\001\\Desktop\\人才大脑图片\\wxy\\王飞\\项目\\web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLmNvbnRlbnQtd3JhcHBlciB7DQogIHdpZHRoOiAxMjAwcHg7DQogIG1hcmdpbjogMCBhdXRvOw0KICBib3JkZXI6IDJweCBzb2xpZCAjNWJjMGRlOw0KICAuY29udGVudC1ib3ggew0KICAgIHdpZHRoOiA4MCU7DQogICAgbWFyZ2luOiAwIGF1dG87DQogIH0NCiAgJi5hdXRvIHsNCiAgICBvdmVyZmxvdzogYXV0bzsNCiAgfQ0KfQ0KaW5wdXRbdHlwZT0idGV4dCJdIHsNCiAgaGVpZ2h0OiAzMHB4Ow0KICBib3JkZXI6IHNvbGlkIDFweCAjY2NjY2NjOw0KICBmb250LXNpemU6IDE0cHg7DQogIHBhZGRpbmc6IDRweCAxMnB4Ow0KfQ0KLmJhY2tPZmYgew0KICB3aWR0aDogNzVweDsNCiAgaGVpZ2h0OiA0NXB4Ow0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjNWJjMGRlICFpbXBvcnRhbnQ7DQogIGJvcmRlci1yYWRpdXM6IDVweDsNCiAgYm9yZGVyLWNvbG9yOiB0cmFuc3BhcmVudDsNCiAgY29sb3I6IHdoaXRlOw0KICBmb250LXNpemU6IDE4cHg7DQp9DQoucGFnZUJveCB7DQogIGRpc3BsYXk6IGZsZXg7DQogIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsNCiAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgbWFyZ2luLXRvcDogMTBweDsNCiAgY29sb3I6ICMzMzM7DQp9DQo="},{"version":3,"sources":["ComList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ComList.vue","sourceRoot":"src/views/personal","sourcesContent":["<template>\r\n  <div class=\"content-wrapper\" style=\"margin-bottom:50px\">\r\n    <div class=\"content-box\">\r\n      <div\r\n        style=\"display:flex;justify-content:space-between;align-items:center ;margin-top:50px;margin-bottom:15px;align-items:center\"\r\n      >\r\n        <span\r\n          @click=\"add\"\r\n          class=\"iconfont icon-add\"\r\n          style=\"fontSize:25px;width:50px;height:40px;border:1px solid #cccccc; display: inline-block;border-radius:5px;line-height:40px\"\r\n        ></span>\r\n        <div style=\"display:flex;\">\r\n          <el-input\r\n            v-model=\"input\"\r\n            placeholder=\"请输入内容\"\r\n            style=\"width:250px;margin-right:50px;\"\r\n            @input=\"getLikeName\"\r\n          ></el-input>\r\n          <span\r\n            @click=\"relpoadFile\"\r\n            class=\"iconfont icon-shuaxin\"\r\n            style=\"fontSize:25px;width:50px;height:40px;border:1px solid #cccccc; display: inline-block;border-radius:5px;line-height:40px;cursor:pointer;\"\r\n          ></span>\r\n        </div>\r\n      </div>\r\n      <el-dialog\r\n        title=\"添加被举荐人\"\r\n        :visible=\"dialogVisible\"\r\n        width=\"30%\"\r\n        @closed=\"closed\"\r\n        :show-close=\"false\"\r\n      >\r\n        <!-- <diaFile ref=\"child1\" :father=\"tableData[index]\" /> -->\r\n        <diaFile ref=\"child1\" :father=\"fatherData\" @addData=\"getComListId\" />\r\n\r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"getChild\">确 定</el-button>\r\n        </span>\r\n      </el-dialog>\r\n\r\n      <el-table border style=\"width: 100%\" :data=\"tableData\">\r\n        <el-table-column prop=\"index\" label=\"序号\" width=\"70\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"name\" label=\"被举荐人\" width=\"100\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"identity\" label=\"被举荐人身份证号\" width=\"200\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"typeName\" label=\"举荐类型\" width=\"200\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"dateCreated\" label=\"添加时间\" width=\"200\">\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button size=\"mini\" @click=\"handleEdit(scope.$index)\"\r\n              >编辑</el-button\r\n            >\r\n            <el-button\r\n              size=\"mini\"\r\n              type=\"danger\"\r\n              @click=\"handleDelete(scope.$index, scope.row)\"\r\n              >删除</el-button\r\n            >\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <div class=\"pageBox\">\r\n        <span class=\"text\">\r\n          显示第{{ (currentPage-1)*pageSize + 1 }}条到第{{ currentPage*pageSize }}条数据, 总共{{ total }}条记录\r\n          每页显示 \r\n          <select\r\n              v-model=\"pageSize\"\r\n              @change=\"pageSizeChange\"\r\n            >\r\n              <option value=\"2\">2</option>\r\n              <option value=\"20\">20</option>\r\n            </select>\r\n          条记录\r\n        </span>\r\n        <el-pagination\r\n          @current-change=\"handleCurrentChange\"\r\n          :current-page=\"currentPage\"\r\n          :page-size=\"pageSize\"\r\n          layout=\"prev, pager, next\"\r\n          :total=\"total\"\r\n          :hide-on-single-page=\"true\"\r\n        >\r\n        </el-pagination>\r\n      </div>\r\n      <button\r\n        class=\"backOff\"\r\n        style=\"margin-top:100px;margin-bottom:50px\"\r\n        @click=\"backOff\"\r\n      >\r\n        返回\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport diaFile from \"./components/diaFile.vue\";\r\nimport moment from \"moment\";\r\nimport { getId } from \"@/utils/auth\";\r\nimport { comListId, deleteAssgin, likeName, deleteById } from \"@/api/personal\";\r\nimport { mapState } from 'vuex';\r\nexport default {\r\n  data() {\r\n    return {\r\n      input: \"\",\r\n      pageSize: 2,\r\n      currentPage: 1,\r\n      total: 0,\r\n      dialogVisible: false,\r\n      tableData: [],\r\n      // 分页\r\n      obj: [],\r\n      index: \"\",\r\n      fatherData: {}\r\n    };\r\n  },\r\n  components: { diaFile },\r\n\r\n  created() {\r\n    console.log(getId());\r\n\r\n    // console.log(moment(Date.now()).format(\"YYYY\"));\r\n\r\n    this.getComListId();\r\n  },\r\n  updated() {\r\n    // console.log(this.tableData[1].name);\r\n  },\r\n\r\n  computed: {\r\n    ...mapState([\r\n      'componyInfo',\r\n    ])\r\n  },\r\n\r\n  methods: {\r\n    calcFullHeight() {\r\n      let h = document.documentElement.clientHeight\r\n      let headH = document.querySelector('.header-wrapper').clientHeight\r\n      let footH = document.querySelector('footer').clientHeight\r\n\r\n      let hh = h - headH - footH - 50\r\n      let boxH = document.querySelector('.content-wrapper').clientHeight\r\n      if(boxH < hh) {\r\n        document.querySelector('.content-wrapper').style.height = (hh) + 'px'\r\n        document.querySelector('.content-wrapper').classList.add('auto')\r\n      }\r\n    },\r\n    pageSizeChange(e) {\r\n      this.pageSize = parseInt(e.target.value)\r\n\r\n      this.getComListId()\r\n    },\r\n    add() {\r\n      this.dialogVisible = true;\r\n\r\n      this.fatherData = {};\r\n    },\r\n    closed() {\r\n      this.$refs.child1.clear();\r\n      this.dialogVisible = false\r\n    },\r\n    getChild() {\r\n      this.dialogVisible = false;\r\n      this.$refs.child1.getAddAssgin(); //child1是写在子组件上的属性 getAddAssgin()是子组件的方法名\r\n    },\r\n    transform(s) {\r\n      let res = \"\";\r\n      switch (s) {\r\n        case \"cylj3\":\r\n          res = \"产业领军人才3类\";\r\n          break;\r\n        case \"gcjj2\":\r\n          res = \"钢城工匠2类\";\r\n          break;\r\n        case \"qs_excellentYouth_doctor\":\r\n          res = \"优秀青年人才1类\";\r\n          break;\r\n        case \"qs_excellentYouth_recommend\":\r\n          res = \"优秀青年人才2类\";\r\n          break;\r\n        case \"qs_excellentYouth_startup\":\r\n          res = \"优秀青年人才3类\";\r\n          break;\r\n        case \"qs_leaders_innovation\":\r\n          res = \"产业领军人才1类\";\r\n          break;\r\n        case \"qs_leaders_startup\":\r\n          res = \"产业领军人才2类\";\r\n          break;\r\n        case \"qs_qingshanElite_craftsman\":\r\n          res = \"钢城工匠1类\";\r\n          break;\r\n        case \"gcjj2\":\r\n          res = \"钢城工匠2类\";\r\n          break;\r\n        case \"lj1\":\r\n          res = \"产业领军创新人才\";\r\n          break;\r\n        case \"lj2\":\r\n          res = \"产业领军创业人才\";\r\n          break;\r\n        case \"b3\":\r\n          res = \"创投机构举(推)荐类\";\r\n          break;\r\n        case \"c\":\r\n          res = \"用人单位举(推)荐类\";\r\n          break;\r\n        case \"zl\":\r\n          res = \"战略科技人才\";\r\n          break;\r\n        case \"a1\":\r\n          res = \"海内外知名高校博士类\";\r\n          break;\r\n        case \"a2\":\r\n          res = \"获得省级以上荣誉优秀类\";\r\n          break;\r\n        case \"b1\":\r\n          res = \"入选青年科技创新人才\";\r\n          break;\r\n        case \"b2\":\r\n          res = \"获得市级以上创业赛事\";\r\n          break;\r\n        default:\r\n          res = s;\r\n      }\r\n      return res;\r\n    },\r\n    async getComListId() {\r\n      const { data } = await comListId({\r\n        companyId: this.componyInfo.id,\r\n        types: this.$route.query.val,\r\n        // year: moment(Date.now()).format(\"YYYY\")\r\n      });\r\n      console.log(data);\r\n      this.tableData = data;\r\n      this.tableData.forEach((v, i) => {\r\n        this.$set(v, \"typeName\", this.transform(v.type));\r\n        this.$set(v, \"index\", i + 1);\r\n      });\r\n      // 分页\r\n      if (data) {\r\n        this.obj = data;\r\n        this.total = this.obj && this.obj.length;\r\n        this.tableData = this.obj.slice(0, this.pageSize);\r\n        this.currentPage = 1\r\n      }\r\n\r\n      this.calcFullHeight()\r\n    },\r\n     handleDelete(row) {\r\n      deleteById({\r\n        ids: this.tableData[row].id\r\n      }).then(data => {\r\n        if (data.code == 200) {\r\n          this.$message.success(data.msg)\r\n          this.getComListId();\r\n        }\r\n      })\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.currentPage = val;\r\n      this.tableData = this.obj.slice(\r\n        (this.currentPage - 1) * this.pageSize,\r\n        this.currentPage * this.pageSize\r\n      );\r\n    },\r\n    handleEdit(index, that) {\r\n      this.dialogVisible = true;\r\n      this.index = index;\r\n      console.log(that);\r\n\r\n      this.fatherData = this.tableData[index];\r\n\r\n      this.$nextTick(() => {\r\n        // this.$ref &&\r\n        //   this.$ref.child1 &&\r\n        //   this.$refs.child1.setData(this.fatherData);\r\n          this.$children[1].$children[2].setData(this.fatherData);\r\n      })\r\n    },\r\n    relpoadFile() {\r\n      this.input = \"\"\r\n      this.getComListId();\r\n    },\r\n    backOff() {\r\n      this.$router.go(-1);\r\n    },\r\n    async getLikeName() {\r\n      if(this.input == '') {\r\n        this.getComListId();\r\n        return\r\n      }\r\n      const data = await likeName({\r\n        condition: this.input,\r\n        // companyId: getId(),\r\n        companyId: this.componyInfo.id,\r\n        types: this.$route.query.val\r\n      });\r\n      console.log(data);\r\n      if (data.code == 200) {\r\n        // this.getComListId();\r\n        this.tableData = data.data;\r\n        this.tableData.forEach((v, i) => {\r\n          this.$set(v, \"typeName\", this.transform(v.type));\r\n          this.$set(v, \"index\", i + 1);\r\n        });\r\n        // 分页\r\n        if (data) {\r\n          this.obj = data.data;\r\n          this.total = this.obj && this.obj.length;\r\n          this.tableData = this.obj.slice(0, this.pageSize);\r\n          this.currentPage = 1\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.content-wrapper {\r\n  width: 1200px;\r\n  margin: 0 auto;\r\n  border: 2px solid #5bc0de;\r\n  .content-box {\r\n    width: 80%;\r\n    margin: 0 auto;\r\n  }\r\n  &.auto {\r\n    overflow: auto;\r\n  }\r\n}\r\ninput[type=\"text\"] {\r\n  height: 30px;\r\n  border: solid 1px #cccccc;\r\n  font-size: 14px;\r\n  padding: 4px 12px;\r\n}\r\n.backOff {\r\n  width: 75px;\r\n  height: 45px;\r\n  background-color: #5bc0de !important;\r\n  border-radius: 5px;\r\n  border-color: transparent;\r\n  color: white;\r\n  font-size: 18px;\r\n}\r\n.pageBox {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-top: 10px;\r\n  color: #333;\r\n}\r\n</style>\r\n"]}]}