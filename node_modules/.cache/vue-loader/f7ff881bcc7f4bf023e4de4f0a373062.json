{"remainingRequest":"E:\\work\\2022-07-21人才服务网改造最新\\talent-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\work\\2022-07-21人才服务网改造最新\\talent-web\\src\\views\\login\\Millcode.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\work\\2022-07-21人才服务网改造最新\\talent-web\\src\\views\\login\\Millcode.vue","mtime":1658367490863},{"path":"E:\\work\\2022-07-21人才服务网改造最新\\talent-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\work\\2022-07-21人才服务网改造最新\\talent-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\work\\2022-07-21人才服务网改造最新\\talent-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\work\\2022-07-21人才服务网改造最新\\talent-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyB0ZWxDb2RlIH0gZnJvbSAiLi4vLi4vYXBpL3JlZyI7DQppbXBvcnQgeyBtaWxsaW9uU3R1ZGVkbnQgfSBmcm9tICIuLi8uLi9hcGkvbG9naW4iOw0KaW1wb3J0IHsgdmFsaWRhdGVQYXNzLCB2YWxpZGF0ZVBhc3MyLCBjaGVja1RlbCB9IGZyb20gIkAvdXRpbHMvdmFsIjsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgcmVnRm9ybTogew0KICAgICAgICB1c2VyTmFtZTogIiIsDQogICAgICAgIG9sZFBhc3M6ICIiLA0KICAgICAgICB0ZWw6ICIiLA0KICAgICAgICBjYXB0Y2hhOiAiIiwNCiAgICAgICAgcGFzczogIiIsDQogICAgICAgIGNoZWNrUGFzczogIiINCiAgICAgIH0sDQogICAgICBsb2dpblJ1bGVzOiB7DQogICAgICAgIHBhc3M6IFt7IHZhbGlkYXRvcjogdmFsaWRhdGVQYXNzKHRoaXMpLCB0cmlnZ2VyOiAiYmx1ciIgfV0sDQogICAgICAgIGNoZWNrUGFzczogW3sgdmFsaWRhdG9yOiB2YWxpZGF0ZVBhc3MyKHRoaXMpLCB0cmlnZ2VyOiAiYmx1ciIgfV0sDQogICAgICAgIHRlbDogW3sgdmFsaWRhdG9yOiBjaGVja1RlbCwgdHJpZ2dlcjogImJsdXIiIH1dDQogICAgICB9LA0KDQogICAgICB5em1EaXM6IGZhbHNlLA0KICAgICAgeXptRGlzVGV4dDogJzEyMHMnLA0KICAgICAgeXptVGltZTogbnVsbCwNCiAgICB9Ow0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIGNvbnNvbGUubG9nKHRoaXMsIHRoaXMuJHJvdXRlKTsNCiAgICBsZXQgdXNlckluZm8gPSB0aGlzLiRyb3V0ZS5wYXJhbXMudXNlckluZm8NCg0KICAgIGlmKHVzZXJJbmZvKSB7DQogICAgICB0aGlzLnJlZ0Zvcm0udXNlck5hbWUgPSB1c2VySW5mby5pZENhcmQNCiAgICAgIHRoaXMucmVnRm9ybS50ZWwgPSB1c2VySW5mby5waG9uZU51bWJlciA/IHVzZXJJbmZvLnBob25lTnVtYmVyIDogJycNCiAgICB9DQogICAgdGhpcy5yZWdGb3JtLm9sZFBhc3MgPSB0aGlzLiRyb3V0ZS5wYXJhbXMucGFzc3dvcmQgPyB0aGlzLiRyb3V0ZS5wYXJhbXMucGFzc3dvcmQgOiAnJw0KDQogICAgLy8g6K6h566X5ruh5bGP6auY5bqmDQogICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICB0aGlzLmNhbGNGdWxsSGVpZ2h0KCkNCiAgICB9LCA1MDApDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBjYWxjRnVsbEhlaWdodCgpIHsNCiAgICAgIGxldCBoID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodA0KICAgICAgbGV0IGhlYWRIID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlci13cmFwcGVyJykuY2xpZW50SGVpZ2h0DQogICAgICBsZXQgZm9vdEggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb290ZXInKS5jbGllbnRIZWlnaHQNCg0KICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRlbnQtd3JhcHBlcicpLnN0eWxlLmhlaWdodCA9IChoIC0gaGVhZEggLSBmb290SCkgKyAncHgnDQogICAgfSwNCiAgICBhc3luYyB0ZWxwaG9uZSgpIHsNCiAgICAgIHRoaXMueXptRGlzID0gdHJ1ZQ0KICAgICAgdGhpcy55em1UaW1lID0gc2V0SW50ZXJ2YWwoKCkgPT4gew0KICAgICAgICB0aGlzLnl6bURpc1RleHQgPSAocGFyc2VJbnQodGhpcy55em1EaXNUZXh0KSAtIDEpICsgJ3MnDQogICAgICAgIGlmKHBhcnNlSW50KHRoaXMueXptRGlzVGV4dCkgPT0gMCkgew0KICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy55em1UaW1lKQ0KICAgICAgICAgIHRoaXMueXptVGltZSA9IG51bGwNCiAgICAgICAgICB0aGlzLnl6bURpc1RleHQgPSAnMTIwcycNCiAgICAgICAgICB0aGlzLnl6bURpcyA9IGZhbHNlDQogICAgICAgIH0NCiAgICAgIH0sIDEwMDApDQoNCiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0ZWxDb2RlKHsNCiAgICAgICAgcGhvbmU6IHRoaXMucmVnRm9ybS50ZWwsDQogICAgICAgIHR5cGU6ICdyZXNldCcNCiAgICAgIH0pOw0KICAgICAgY29uc29sZS5sb2coZGF0YSk7DQoNCiAgICAgIGlmKGRhdGEuY29kZSA9PSAyMDApIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKGRhdGEuZGF0YSB8fCBkYXRhLm1zZyB8fCAn6aqM6K+B56CB5bey5Y+R6YCB77yBJykNCiAgICAgIH0NCiAgICB9LA0KDQogICAgc3VibWl0Rm9ybShzdHIpIHsNCiAgICAgIC8vIHRoaXMuJHJlZnNbJ3J1bGVGb3JtJ10gID09PSAgdGhpcy4kcmVmcy5ydWxlRm9ybQ0KICAgICAgdGhpcy4kcmVmc1tzdHJdLnZhbGlkYXRlKGFzeW5jIHZhbGlkID0+IHsNCiAgICAgICAgaWYgKHZhbGlkKSB7DQogICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IG1pbGxpb25TdHVkZWRudCh7DQogICAgICAgICAgICBjb2RlOiB0aGlzLnJlZ0Zvcm0uY2FwdGNoYSwNCiAgICAgICAgICAgIGVuUGFhc3dvcmQ6IHRoaXMucmVnRm9ybS5jaGVja1Bhc3MsDQogICAgICAgICAgICBpZE51bWJlcjogdGhpcy5yZWdGb3JtLnVzZXJOYW1lLA0KICAgICAgICAgICAgbmV3UGFzc3dvcmQ6IHRoaXMucmVnRm9ybS5wYXNzLA0KICAgICAgICAgICAgb2xkUGFhc3dvcmQ6IHRoaXMucmVnRm9ybS5vbGRQYXNzLA0KICAgICAgICAgICAgcGhvbmU6IHRoaXMucmVnRm9ybS50ZWwsDQogICAgICAgICAgICBuYW1lOiB0aGlzLnJlZ0Zvcm0udXNlck5hbWUNCiAgICAgICAgICB9KTsNCiAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTsNCiAgICAgICAgICBpZiAoZGF0YS5jb2RlID09IDIwMCkgew0KICAgICAgICAgICAgdGhpcy4kYWxlcnQoJ+WvhueggeS/ruaUueaIkOWKnycsIHsNCiAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICLnoa7lrpoiDQogICAgICAgICAgICB9KS50aGVuKCgpID0+IHsNCiAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goImxvZ2luIik7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgY29uc29sZS5sb2coIuihqOWNleS4jemAmui/h+agoemqjCIpOw0KICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfQ0KICB9DQp9Ow0K"},{"version":3,"sources":["Millcode.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Millcode.vue","sourceRoot":"src/views/login","sourcesContent":["<template>\r\n  <div class=\"content-wrapper\">\r\n    <div class=\"title\" style=\"margin-top: 50px;\">\r\n      <h3>百万大学生重置密码</h3>\r\n    </div>\r\n    <div class=\"main-box\" style=\"width:600px; margin-left: 250px\">\r\n      <el-form\r\n        :model=\"regForm\"\r\n        status-icon\r\n        :rules=\"loginRules\"\r\n        ref=\"regForm\"\r\n        label-width=\"100px\"\r\n        class=\"demo-ruleForm\"\r\n      >\r\n        <!-- <el-form-item label=\"用户名\" prop=\"userName\">\r\n          <el-input\r\n            v-model=\"regForm.userName\"\r\n            placeholder=\"请输入用户名\"\r\n          ></el-input\r\n        ></el-form-item>\r\n        <el-form-item label=\"原密码\" prop=\"oldPass\">\r\n          <el-input\r\n            type=\"password\"\r\n            v-model=\"regForm.oldPass\"\r\n            autocomplete=\"off\"\r\n            placeholder=\"请输入原密码\"\r\n          ></el-input>\r\n        </el-form-item> -->\r\n        <el-form-item label=\"手机号\" prop=\"tel\">\r\n          <el-input v-model=\"regForm.tel\" placeholder=\"请输入手机号\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"验证码\" prop=\"captcha\">\r\n          <el-input\r\n            v-model=\"regForm.captcha\"\r\n            autocomplete=\"off\"\r\n            placeholder=\"请输入验证码\"\r\n            ><el-button\r\n              slot=\"append\"\r\n              style=\"backgroundColor:#1b9af7;color:white\"\r\n              @click=\"telphone\"\r\n              :disabled=\"yzmDis\"\r\n              >{{ yzmDis ? yzmDisText : \"发送验证码\" }}</el-button\r\n            >\r\n          </el-input>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"新密码\" prop=\"pass\">\r\n          <el-input\r\n            type=\"password\"\r\n            v-model=\"regForm.pass\"\r\n            autocomplete=\"off\"\r\n            placeholder=\"请输入新密码\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"确认密码\" prop=\"checkPass\">\r\n          <el-input\r\n            type=\"password\"\r\n            v-model=\"regForm.checkPass\"\r\n            autocomplete=\"off\"\r\n            placeholder=\"请确认密码\"\r\n          ></el-input>\r\n        </el-form-item>\r\n\r\n        <el-form-item>\r\n          <el-button\r\n            type=\"primary\"\r\n            @click=\"submitForm('regForm')\"\r\n            style=\"backgroundColor:#1b9af7;color:white\"\r\n            >提交</el-button\r\n          >\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { telCode } from \"../../api/reg\";\r\nimport { millionStudednt } from \"../../api/login\";\r\nimport { validatePass, validatePass2, checkTel } from \"@/utils/val\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      regForm: {\r\n        userName: \"\",\r\n        oldPass: \"\",\r\n        tel: \"\",\r\n        captcha: \"\",\r\n        pass: \"\",\r\n        checkPass: \"\"\r\n      },\r\n      loginRules: {\r\n        pass: [{ validator: validatePass(this), trigger: \"blur\" }],\r\n        checkPass: [{ validator: validatePass2(this), trigger: \"blur\" }],\r\n        tel: [{ validator: checkTel, trigger: \"blur\" }]\r\n      },\r\n\r\n      yzmDis: false,\r\n      yzmDisText: '120s',\r\n      yzmTime: null,\r\n    };\r\n  },\r\n  mounted() {\r\n    console.log(this, this.$route);\r\n    let userInfo = this.$route.params.userInfo\r\n\r\n    if(userInfo) {\r\n      this.regForm.userName = userInfo.idCard\r\n      this.regForm.tel = userInfo.phoneNumber ? userInfo.phoneNumber : ''\r\n    }\r\n    this.regForm.oldPass = this.$route.params.password ? this.$route.params.password : ''\r\n\r\n    // 计算满屏高度\r\n    setTimeout(() => {\r\n      this.calcFullHeight()\r\n    }, 500)\r\n  },\r\n  methods: {\r\n    calcFullHeight() {\r\n      let h = document.documentElement.clientHeight\r\n      let headH = document.querySelector('.header-wrapper').clientHeight\r\n      let footH = document.querySelector('footer').clientHeight\r\n\r\n      document.querySelector('.content-wrapper').style.height = (h - headH - footH) + 'px'\r\n    },\r\n    async telphone() {\r\n      this.yzmDis = true\r\n      this.yzmTime = setInterval(() => {\r\n        this.yzmDisText = (parseInt(this.yzmDisText) - 1) + 's'\r\n        if(parseInt(this.yzmDisText) == 0) {\r\n          clearInterval(this.yzmTime)\r\n          this.yzmTime = null\r\n          this.yzmDisText = '120s'\r\n          this.yzmDis = false\r\n        }\r\n      }, 1000)\r\n\r\n      const data = await telCode({\r\n        phone: this.regForm.tel,\r\n        type: 'reset'\r\n      });\r\n      console.log(data);\r\n\r\n      if(data.code == 200) {\r\n        this.$message.success(data.data || data.msg || '验证码已发送！')\r\n      }\r\n    },\r\n\r\n    submitForm(str) {\r\n      // this.$refs['ruleForm']  ===  this.$refs.ruleForm\r\n      this.$refs[str].validate(async valid => {\r\n        if (valid) {\r\n          const data = await millionStudednt({\r\n            code: this.regForm.captcha,\r\n            enPaasword: this.regForm.checkPass,\r\n            idNumber: this.regForm.userName,\r\n            newPassword: this.regForm.pass,\r\n            oldPaasword: this.regForm.oldPass,\r\n            phone: this.regForm.tel,\r\n            name: this.regForm.userName\r\n          });\r\n          console.log(data);\r\n          if (data.code == 200) {\r\n            this.$alert('密码修改成功', {\r\n              confirmButtonText: \"确定\"\r\n            }).then(() => {\r\n              this.$router.push(\"login\");\r\n            });\r\n          }\r\n        } else {\r\n          console.log(\"表单不通过校验\");\r\n          return false;\r\n        }\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n// 版心\r\n.content-wrapper {\r\n  width: 1200px;\r\n  margin: 0 auto;\r\n  overflow: auto;\r\n}\r\n</style>\r\n"]}]}