{"remainingRequest":"C:\\Users\\001\\Desktop\\人才大脑图片\\wxy\\王飞\\项目\\web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\001\\Desktop\\人才大脑图片\\wxy\\王飞\\项目\\web\\src\\views\\students\\components\\HouseMap.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\001\\Desktop\\人才大脑图片\\wxy\\王飞\\项目\\web\\src\\views\\students\\components\\HouseMap.vue","mtime":1658367490896},{"path":"C:\\Users\\001\\Desktop\\人才大脑图片\\wxy\\王飞\\项目\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\001\\Desktop\\人才大脑图片\\wxy\\王飞\\项目\\web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\001\\Desktop\\人才大脑图片\\wxy\\王飞\\项目\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\001\\Desktop\\人才大脑图片\\wxy\\王飞\\项目\\web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBwcm9qZWN0TGlzdCwgY291bnRIb3VzZUZvck1hcCwgZ2V0U3R1ZGVudFN0YXR1cyB9IGZyb20gJ0AvYXBpL2hvdXNlLmpzJzsNCmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCc7DQppbXBvcnQgeyBnZXRJZCB9IGZyb20gIi4uLy4uLy4uL3V0aWxzL2F1dGgiOw0KaW1wb3J0IHsgRXZlbnRCdXMgfSBmcm9tICdAL2V2ZW50LWJ1cy5qcyc7DQppbXBvcnQgY3VzdG9tT3ZlcmxheSBmcm9tICcuL2N1c3RvbU92ZXJsYXkuanMnOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHByb2plY3RMaXN0OiBbXSwNCiAgICAgIHpvb206IDExLA0KDQogICAgICBhcmVhRGF0YTogW10sIC8vIOWMuuWfn+aVsOaNrg0KICAgICAgcHJvamVjdERhdGE6IFtdLCAvLyDlhbfkvZPpobnnm67mlbDmja4NCiAgICAgIGlzQXJlYU1hcmtlclZpc2libGU6IHRydWUsDQoNCiAgICAgIGFyZWFMYWJlbEFycjogW10sDQogICAgICBwcm9qZWN0TGFiZWxBcnI6IFtdLA0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCAoKSB7DQogICAgLy8gdGhpcy5nZXREYXRhKCkNCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICB0aGlzLmluaXRCTWFwKCkNCiAgICB0aGlzLmdldERhdGEoKQ0KDQogICAgRXZlbnRCdXMuJG9uKCdjdXN0b21BcmVhQ2xpY2snLCBlID0+IHsNCiAgICAgIHRoaXMudG9nZ2xlQXJlYUxhYmVsQXJyKCkNCiAgICAgIHRoaXMuem9vbSA9IGUNCiAgICB9KQ0KDQogICAgRXZlbnRCdXMuJG9uKCdjdXN0b21Qcm9jamVjdENsaWNrJywgZSA9PiB7DQogICAgICBpZih3aW5kb3cuY3VzdG9tUHJvY2plY3RDbGlja0ZpcnN0ICE9IHRydWUpIHJldHVybg0KICAgICAgd2luZG93LmN1c3RvbVByb2NqZWN0Q2xpY2tGaXJzdCA9IGZhbHNlDQoNCiAgICAgIC8vIOWFiOWIpOaWreaYr+WQpueZu+WFpQ0KICAgICAgaWYoIXRoaXMudXNlckluZm8pIHsNCiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9sb2dpbicpDQogICAgICB9ZWxzZXsNCiAgICAgICAgLy8g5p+l5o6l5Y+j5piv5ZCm5pyJ6LWE5qC8IHRydWUgLS0g6YCJ5oi/6K+m5oOFIDsgZmFsc2UgLS0g55Sz6K+3DQogICAgICAgIGdldFN0dWRlbnRTdGF0dXMoew0KICAgICAgICAgIHN0dWRlbnRJZDogZ2V0SWQoKSwNCiAgICAgICAgICBhcmVhOiBlLmRpc3RyaWN0bmFtZSB8fCBlLmRpc3RyaWN0TmFtZSwNCiAgICAgICAgfSkudGhlbihyZXMgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7DQogICAgICAgICAgaWYocmVzLmNvZGUgIT0gMjAwKSB7DQogICAgICAgICAgICB0aGlzLiRjb25maXJtKHJlcy5tc2csICfmj5DnpLonLCB7DQogICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywNCiAgICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogZmFsc2UsDQogICAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJw0KICAgICAgICAgICAgfSkudGhlbigoKSA9PiB7DQogICAgICAgICAgICAgIGlmKHJlcy5jb2RlID09IDIwMSkgew0KICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvcmVwb3J0T25saWUnKQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7DQoNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgfWVsc2UgaWYocmVzLmNvZGUgPT0gMjAwKSB7DQogICAgICAgICAgICAvLyBsZXQgaWQgPSBjdy5kYXRhLnByb2plY3RpZA0KICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goew0KICAgICAgICAgICAgICBwYXRoOiAicmVwb3J0SG91c2UzIiwNCiAgICAgICAgICAgICAgcXVlcnk6IHsNCiAgICAgICAgICAgICAgICBwcm9qZWN0SWQ6IGUucHJvamVjdGlkIHx8ICcnLA0KICAgICAgICAgICAgICAgIHZpbGxhZ2VJZDogZS52aWxsYWdlSWQgfHwgJycsDQogICAgICAgICAgICAgICAgc291cmNlVHlwZTogZS5zb3VyY2VUeXBlLA0KICAgICAgICAgICAgICAgICBwcm9qZWN0TmFtZTogZS5wcm9qZWN0TmFtZSwNCiAgICAgICAgICAgICAgICB2aWxsYWdlTmFtZTogZS52aWxsYWdlTmFtZSwNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgfQ0KICAgICAgfSkNCg0KICAgICAgfQ0KICAgIH0pDQoNCiAgICBsZXQgdGhhdCA9IHRoaXMNCiAgICBkb2N1bWVudC5vbm1vdXNld2hlZWwgPSBlID0+IHsNCiAgICAgIHRoaXMuem9vbSA9IHRoYXQubWFwICYmIHRoYXQubWFwLmdldFpvb20oKQ0KICAgIH07DQoNCiAgICAvLyDorqHnrpfmu6HlsY/pq5jluqYNCiAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgIHRoaXMuY2FsY0Z1bGxIZWlnaHQoKQ0KICAgIH0sIDUwMCkNCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICAuLi5tYXBTdGF0ZShbJ3VzZXJJbmZvJ10pDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBjYWxjRnVsbEhlaWdodCgpIHsNCiAgICAgIGxldCBoID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodA0KICAgICAgbGV0IGhlYWRIID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlci13cmFwcGVyJykuY2xpZW50SGVpZ2h0DQogICAgICBsZXQgZm9vdEggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb290ZXInKS5jbGllbnRIZWlnaHQNCiAgICAgIGxldCBlbEhlYWRlckggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWwtaGVhZGVyJykuY2xpZW50SGVpZ2h0DQoNCiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYXBCb3gnKS5zdHlsZS5oZWlnaHQgPSAoaCAtIGhlYWRIIC0gZm9vdEggLSBlbEhlYWRlckggLSAyKSArICdweCcNCiAgICB9LA0KICAgIGluaXRCTWFwIChjYikgew0KICAgICAgLy8gY29uc29sZS5sb2coVE1hcCk7DQogICAgICAgIHZhciBjZW50ZXIgPSBuZXcgVE1hcC5MYXRMbmcoMzAuNTcwMjQ2NjkyODAyMzUsIDExNC4zMDA0MjkyNDgxMDUyNykNCiAgICAgICAgICAgIC8v5a6a5LmJbWFw5Y+Y6YeP77yM6LCD55SoIFRNYXAuTWFwKCkg5p6E6YCg5Ye95pWw5Yib5bu65Zyw5Zu+DQogICAgICAgIHZhciBtYXAgPSB0aGlzLm1hcCA9IHdpbmRvdy5tYXAgPSBuZXcgVE1hcC5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FsbG1hcCcpLCB7DQogICAgICAgICAgICBjZW50ZXI6IGNlbnRlciwvL+iuvue9ruWcsOWbvuS4reW/g+eCueWdkOaghw0KICAgICAgICAgICAgem9vbTogdGhpcy56b29tLCAgIC8v6K6+572u5Zyw5Zu+57yp5pS+57qn5YirDQogICAgICAgIH0pOw0KDQogICAgICAgIG1hcC5zZXREb3VibGVDbGlja1pvb20oZmFsc2UpDQogICAgICAgIG1hcC5yZW1vdmVDb250cm9sKCJ6b29tIikNCiAgICAgICAgbWFwLnJlbW92ZUNvbnRyb2woImxvZ28iKQ0KICAgICAgICBjb25zb2xlLmxvZyh0aGlzLm1hcCk7DQogICAgfSwNCiAgICBjcmVhdGVMYWJlbCAoZGF0YSwgbGF5ZXJUeXBlKSB7DQogICAgICBsZXQgdGhhdCA9IHRoaXMNCiAgICAgIGRhdGEuZm9yRWFjaChkID0+IHsNCiAgICAgICAgbGV0IGxhYmVsID0gbmV3IGN1c3RvbU92ZXJsYXkoew0KICAgICAgICAgIG1hcDogdGhhdC5tYXAsDQogICAgICAgICAgcG9zaXRpb246IG5ldyBUTWFwLkxhdExuZyhkLmxhdGl0dWRlLCBkLmxvbmdpdHVkZSksDQogICAgICAgICAgZGF0YTogZCwNCiAgICAgICAgICBtaW5SYWRpdXM6IDAsDQogICAgICAgICAgbWF4UmFkaXVzOiAyMCwNCiAgICAgICAgICBjb250ZW50TmFtZTogZC5yZWdpb25OYW1lLA0KICAgICAgICAgIGNvbnRlbnRDb3VudDogZC5jb3VudCwNCiAgICAgICAgICBsYXllclR5cGUNCiAgICAgICAgfSk7DQoNCiAgICAgIC8vIGNvbnNvbGUubG9nKGxhYmVsKTsNCiAgICAgICAgaWYobGF5ZXJUeXBlID09ICdwcm9qZWN0TGFiZWwnKSB7DQogICAgICAgICAgdGhpcy5wcm9qZWN0TGFiZWxBcnIucHVzaChsYWJlbCkNCiAgICAgICAgfWVsc2V7DQogICAgICAgICAgdGhpcy5hcmVhTGFiZWxBcnIucHVzaChsYWJlbCkNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KDQogICAgZ2V0RGF0YSgpIHsNCiAgICAgIGNvdW50SG91c2VGb3JNYXAoe30pLnRoZW4ocmVzID0+IHsNCiAgICAgICAgLy8gY29uc29sZS5sb2cocmVzKTsNCiAgICAgICAgY29uc3QgZCA9IHJlcy5kYXRhOw0KICAgICAgICBpZiAoZCkgew0KICAgICAgICAgIHRoaXMuYXJlYURhdGEgPSBkOw0KICAgICAgICAgIGxldCBhcnIgPSBbXTsNCiAgICAgICAgICBkLmZvckVhY2goZSA9PiB7DQogICAgICAgICAgICBpZiAoZS5jaGlsZERhdGEgJiYgZS5jaGlsZERhdGEubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICBhcnIucHVzaCguLi5lLmNoaWxkRGF0YSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSk7DQogICAgICAgICAgdGhpcy5wcm9qZWN0RGF0YSA9IGFycjsNCg0KICAgICAgICAgIC8vIHRoaXMuaW5pdEJNYXAoKQ0KDQogICAgICAgICAgLy8g5Yy65Z+fDQogICAgICAgICAgdGhpcy5jcmVhdGVMYWJlbCh0aGlzLmFyZWFEYXRhLCAnYXJlYUxhYmVsJykNCiAgICAgICAgICB0aGlzLmNyZWF0ZUxhYmVsKHRoaXMucHJvamVjdERhdGEsICdwcm9qZWN0TGFiZWwnKQ0KDQogICAgICAgICAgdGhpcy50b2dnbGVBcmVhTGFiZWxBcnIoKQ0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIHRvZ2dsZUFyZWFMYWJlbEFycigpIHsNCiAgICAgIGlmKHRoaXMuaXNBcmVhTWFya2VyVmlzaWJsZSkgew0KICAgICAgICB0aGlzLmFyZWFMYWJlbEFyci5mb3JFYWNoKGxhYmVsID0+IHsNCiAgICAgICAgICBsYWJlbC5kb20uc3R5bGUuZGlzcGxheSA9ICdibG9jaycNCiAgICAgICAgfSkNCiAgICAgICAgdGhpcy5wcm9qZWN0TGFiZWxBcnIuZm9yRWFjaChsYWJlbCA9PiB7DQogICAgICAgICAgbGFiZWwuZG9tLnN0eWxlLmRpc3BsYXkgPSAnbm9uZScNCiAgICAgICAgfSkNCiAgICAgIH1lbHNlew0KICAgICAgICB0aGlzLmFyZWFMYWJlbEFyci5mb3JFYWNoKGxhYmVsID0+IHsNCiAgICAgICAgICBsYWJlbC5kb20uc3R5bGUuZGlzcGxheSA9ICdub25lJw0KICAgICAgICB9KQ0KICAgICAgICB0aGlzLnByb2plY3RMYWJlbEFyci5mb3JFYWNoKGxhYmVsID0+IHsNCiAgICAgICAgICBsYWJlbC5kb20uc3R5bGUuZGlzcGxheSA9ICdibG9jaycNCiAgICAgICAgfSkNCiAgICAgIH0NCiAgICAgIHRoaXMuaXNBcmVhTWFya2VyVmlzaWJsZSA9ICF0aGlzLmlzQXJlYU1hcmtlclZpc2libGUNCiAgICB9DQogIH0sDQogIHdhdGNoOiB7DQogICAgLy8g5Yy65Z+fbWFya2Vy5a+56LGh55qE5pi+5b2x6Zeu6aKY5b6F56CU56m277yMYXBp5peg5rOV5a6e546w5pi+5b2x5Lqk5LqSDQogICAgem9vbShuZXdWLCBvbGRWKSB7DQogICAgICBpZiAobmV3ViA+PSAxMyAmJiAhdGhpcy5pc0FyZWFNYXJrZXJWaXNpYmxlKSB7DQogICAgICAgIHRoaXMudG9nZ2xlQXJlYUxhYmVsQXJyKCkNCiAgICAgIH1lbHNlIGlmIChuZXdWIDw9IDExLjUgJiYgdGhpcy5pc0FyZWFNYXJrZXJWaXNpYmxlKXsNCiAgICAgICAgdGhpcy50b2dnbGVBcmVhTGFiZWxBcnIoKQ0KICAgICAgfQ0KICAgIH0sDQogIH0NCn07DQo="},{"version":3,"sources":["HouseMap.vue"],"names":[],"mappings":";;;;;;;;;;;;;AAaA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"HouseMap.vue","sourceRoot":"src/views/students/components","sourcesContent":["<template>\r\n<!-- 腾讯地图版 -->\r\n  <div class=\"mapBox\">\r\n    <div id=\"allmap\"></div>\r\n    <div class=\"tooltip\" v-show=\"!userInfo\">\r\n      <img src=\"../../../assets/imgs/houseList/zhuYi.svg\" alt=\"\">\r\n      您未登录，仅能查看地图房源\r\n      <!-- 您当前是未登录状态请先登录 -->\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { projectList, countHouseForMap, getStudentStatus } from '@/api/house.js';\r\nimport { mapState } from 'vuex';\r\nimport { getId } from \"../../../utils/auth\";\r\nimport { EventBus } from '@/event-bus.js';\r\nimport customOverlay from './customOverlay.js';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      projectList: [],\r\n      zoom: 11,\r\n\r\n      areaData: [], // 区域数据\r\n      projectData: [], // 具体项目数据\r\n      isAreaMarkerVisible: true,\r\n\r\n      areaLabelArr: [],\r\n      projectLabelArr: [],\r\n    }\r\n  },\r\n  created () {\r\n    // this.getData()\r\n  },\r\n  mounted() {\r\n    this.initBMap()\r\n    this.getData()\r\n\r\n    EventBus.$on('customAreaClick', e => {\r\n      this.toggleAreaLabelArr()\r\n      this.zoom = e\r\n    })\r\n\r\n    EventBus.$on('customProcjectClick', e => {\r\n      if(window.customProcjectClickFirst != true) return\r\n      window.customProcjectClickFirst = false\r\n\r\n      // 先判断是否登入\r\n      if(!this.userInfo) {\r\n        this.$router.push('/login')\r\n      }else{\r\n        // 查接口是否有资格 true -- 选房详情 ; false -- 申请\r\n        getStudentStatus({\r\n          studentId: getId(),\r\n          area: e.districtname || e.districtName,\r\n        }).then(res => {\r\n          console.log(res);\r\n          if(res.code != 200) {\r\n            this.$confirm(res.msg, '提示', {\r\n              confirmButtonText: '确定',\r\n              showCancelButton: false,\r\n              type: 'warning'\r\n            }).then(() => {\r\n              if(res.code == 201) {\r\n                this.$router.push('/reportOnlie')\r\n              }\r\n            }).catch(() => {\r\n\r\n            })\r\n          }else if(res.code == 200) {\r\n            // let id = cw.data.projectid\r\n            this.$router.push({\r\n              path: \"reportHouse3\",\r\n              query: {\r\n                projectId: e.projectid || '',\r\n                villageId: e.villageId || '',\r\n                sourceType: e.sourceType,\r\n                 projectName: e.projectName,\r\n                villageName: e.villageName,\r\n              }\r\n            });\r\n          }\r\n      })\r\n\r\n      }\r\n    })\r\n\r\n    let that = this\r\n    document.onmousewheel = e => {\r\n      this.zoom = that.map && that.map.getZoom()\r\n    };\r\n\r\n    // 计算满屏高度\r\n    setTimeout(() => {\r\n      this.calcFullHeight()\r\n    }, 500)\r\n  },\r\n  computed: {\r\n    ...mapState(['userInfo'])\r\n  },\r\n  methods: {\r\n    calcFullHeight() {\r\n      let h = document.documentElement.clientHeight\r\n      let headH = document.querySelector('.header-wrapper').clientHeight\r\n      let footH = document.querySelector('footer').clientHeight\r\n      let elHeaderH = document.querySelector('.el-header').clientHeight\r\n\r\n      document.querySelector('.mapBox').style.height = (h - headH - footH - elHeaderH - 2) + 'px'\r\n    },\r\n    initBMap (cb) {\r\n      // console.log(TMap);\r\n        var center = new TMap.LatLng(30.57024669280235, 114.30042924810527)\r\n            //定义map变量，调用 TMap.Map() 构造函数创建地图\r\n        var map = this.map = window.map = new TMap.Map(document.getElementById('allmap'), {\r\n            center: center,//设置地图中心点坐标\r\n            zoom: this.zoom,   //设置地图缩放级别\r\n        });\r\n\r\n        map.setDoubleClickZoom(false)\r\n        map.removeControl(\"zoom\")\r\n        map.removeControl(\"logo\")\r\n        console.log(this.map);\r\n    },\r\n    createLabel (data, layerType) {\r\n      let that = this\r\n      data.forEach(d => {\r\n        let label = new customOverlay({\r\n          map: that.map,\r\n          position: new TMap.LatLng(d.latitude, d.longitude),\r\n          data: d,\r\n          minRadius: 0,\r\n          maxRadius: 20,\r\n          contentName: d.regionName,\r\n          contentCount: d.count,\r\n          layerType\r\n        });\r\n\r\n      // console.log(label);\r\n        if(layerType == 'projectLabel') {\r\n          this.projectLabelArr.push(label)\r\n        }else{\r\n          this.areaLabelArr.push(label)\r\n        }\r\n      })\r\n    },\r\n\r\n    getData() {\r\n      countHouseForMap({}).then(res => {\r\n        // console.log(res);\r\n        const d = res.data;\r\n        if (d) {\r\n          this.areaData = d;\r\n          let arr = [];\r\n          d.forEach(e => {\r\n            if (e.childData && e.childData.length > 0) {\r\n              arr.push(...e.childData);\r\n            }\r\n          });\r\n          this.projectData = arr;\r\n\r\n          // this.initBMap()\r\n\r\n          // 区域\r\n          this.createLabel(this.areaData, 'areaLabel')\r\n          this.createLabel(this.projectData, 'projectLabel')\r\n\r\n          this.toggleAreaLabelArr()\r\n        }\r\n      });\r\n    },\r\n    toggleAreaLabelArr() {\r\n      if(this.isAreaMarkerVisible) {\r\n        this.areaLabelArr.forEach(label => {\r\n          label.dom.style.display = 'block'\r\n        })\r\n        this.projectLabelArr.forEach(label => {\r\n          label.dom.style.display = 'none'\r\n        })\r\n      }else{\r\n        this.areaLabelArr.forEach(label => {\r\n          label.dom.style.display = 'none'\r\n        })\r\n        this.projectLabelArr.forEach(label => {\r\n          label.dom.style.display = 'block'\r\n        })\r\n      }\r\n      this.isAreaMarkerVisible = !this.isAreaMarkerVisible\r\n    }\r\n  },\r\n  watch: {\r\n    // 区域marker对象的显影问题待研究，api无法实现显影交互\r\n    zoom(newV, oldV) {\r\n      if (newV >= 13 && !this.isAreaMarkerVisible) {\r\n        this.toggleAreaLabelArr()\r\n      }else if (newV <= 11.5 && this.isAreaMarkerVisible){\r\n        this.toggleAreaLabelArr()\r\n      }\r\n    },\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n#allmap {\r\n  width: 100%;\r\n  height: 500px;\r\n  position: relative;\r\n}\r\n\r\n#allmap {\r\n  & /deep/ .logo-text{\r\n    display: none;\r\n  }\r\n  & /deep/ .rotate-circle .compass-img{\r\n    left: 0;\r\n  }\r\n  & /deep/ .rotate-circle .rotate-left-img{\r\n    left: 0;\r\n  }\r\n  & /deep/ .rotate-circle .rotate-right-img{\r\n    left: 0;\r\n  }\r\n  & /deep/ .rotate-circle .rotate-top-img{\r\n    left: 0;\r\n  }\r\n  & /deep/ .rotate-circle .rotate-bottom-img{\r\n    left: 0;\r\n  }\r\n}\r\n\r\n.tooltip {\r\n  position: absolute;\r\n  top: 10px;\r\n  left: 50%;\r\n  // width: 100%;\r\n  height: 30px;\r\n  line-height: 30px;\r\n  text-align: center;\r\n  background: rgba(0, 0, 0, 0.3);\r\n  color: #f00;\r\n  z-index: 10000;\r\n  transform: translateX(-50%);\r\n  // width: 270px;\r\n  height: 46px;\r\n  background: #FFDCDC;\r\n  border: 1px solid #D10100;\r\n  box-shadow: 0px 0px 19px 1px rgba(209, 1, 0, 0.5);\r\n  border-radius: 10px;\r\n  display: flex;\r\n  align-items: center;\r\n  padding-right: 10px;\r\n  img {\r\n    width: 30px;\r\n    height: 30px;\r\n    margin-right: 10px;\r\n    margin-left: 10px;\r\n  }\r\n}\r\n.mapBox {\r\n  position: relative;\r\n  // min-height: 640px;\r\n  display: flex;\r\n  // align-items: center;\r\n}\r\n\r\n</style>\r\n"]}]}