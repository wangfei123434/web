{"remainingRequest":"C:\\Users\\001\\Desktop\\人才大脑图片\\wxy\\王飞\\项目\\web\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\001\\Desktop\\人才大脑图片\\wxy\\王飞\\项目\\web\\src\\views\\personal\\components\\FileMixins.js","dependencies":[{"path":"C:\\Users\\001\\Desktop\\人才大脑图片\\wxy\\王飞\\项目\\web\\src\\views\\personal\\components\\FileMixins.js","mtime":1663663188734},{"path":"C:\\Users\\001\\Desktop\\人才大脑图片\\wxy\\王飞\\项目\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\001\\Desktop\\人才大脑图片\\wxy\\王飞\\项目\\web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzLzAwMS9EZXNrdG9wL1x1NEVCQVx1NjI0RFx1NTkyN1x1ODExMVx1NTZGRVx1NzI0Ny93eHkvXHU3MzhCXHU5OERFL1x1OTg3OVx1NzZFRS93ZWIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX3NsaWNlZFRvQXJyYXkgZnJvbSAiQzovVXNlcnMvMDAxL0Rlc2t0b3AvXHU0RUJBXHU2MjREXHU1OTI3XHU4MTExXHU1NkZFXHU3MjQ3L3d4eS9cdTczOEJcdTk4REUvXHU5ODc5XHU3NkVFL3dlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheSI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyI7CmltcG9ydCB7IGdldEVudGVycHJpc2VBdHRhY2htZW50Q2l0eSwgc2F2ZUVudGVycHJpc2VBdHRhY2htZW50IH0gZnJvbSAiQC9hcGkvcGVyc29uYWwiOyAvL+aWh+S7tuS4iuS8oOebuOWFs+WFrOWFsemAu+i+kQoKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhdHRhY2htZW50TGlzdERhdGE6IFtdLAogICAgICAvLyDmjqXlj6Pmn6Xor6LnmoTpmYTku7bmlbDmja4KICAgICAgYXR0YWNobWVudDogewogICAgICAgIC8v6ZmE5Lu25a+56LGhCiAgICAgICAgZW50ZXJwcmlzZUlkOiAnJywKICAgICAgICAvL+S8geS4mmlkCiAgICAgICAgZmlsZXM6IFsvLyB7CiAgICAgICAgICAvLyAgIGtleTogJycsICAgIC8v5paH5Lu2a2V5CiAgICAgICAgICAvLyAgIGZpbGU6ICcnICAgIC8v5paH5Lu2RmlsZea1gQogICAgICAgICAgLy8gfQogICAgICAgIF0sCiAgICAgICAgZGVsZXRlSWRzOiBbXSAvL+imgeWIoOmZpOeahOaWh+S7tmlk5pWw57uECgogICAgICB9CiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuZmV0Y2hBdHRhY2htZW50RGF0YSgpOwogIH0sCiAgbWV0aG9kczogewogICAgLy8g5paH5Lu25pu05paw5LqL5Lu2CiAgICBmaWxlQ2hhbmdlOiBmdW5jdGlvbiBmaWxlQ2hhbmdlKGUsIGtleSkgewogICAgICB2YXIgaW5wdXQgPSBlLnRhcmdldDsKCiAgICAgIHZhciBfaW5wdXQkZmlsZXMgPSBfc2xpY2VkVG9BcnJheShpbnB1dC5maWxlcywgMSksCiAgICAgICAgICBmaWxlID0gX2lucHV0JGZpbGVzWzBdOwoKICAgICAgaW5wdXQudmFsdWUgPSAiIjsKICAgICAgdGhpcy5mb3JtW2tleV0gPSBmaWxlLm5hbWU7CiAgICAgIHZhciBrZXlzID0gdGhpcy5hdHRhY2htZW50LmZpbGVzLm1hcChmdW5jdGlvbiAoaSkgewogICAgICAgIHJldHVybiBpLmtleTsKICAgICAgfSk7CiAgICAgICFrZXlzLmluY2x1ZGVzKGtleSkgJiYgdGhpcy5hdHRhY2htZW50LmZpbGVzLnB1c2goewogICAgICAgIGtleToga2V5LAogICAgICAgIGZpbGU6IGZpbGUKICAgICAgfSk7CiAgICAgIHRoaXMuYXR0YWNobWVudC5lbnRlcnByaXNlSWQgPSBlLmVudGVycHJpc2VJZDsKICAgICAgc2F2ZUVudGVycHJpc2VBdHRhY2htZW50KHRoaXMuZ2V0QXR0YWNobWVudEZvcm1EYXRhKCkpOwogICAgfSwKICAgIC8vIOiOt+WPlumZhOS7tuaVsOaNrgogICAgZ2V0QXR0YWNobWVudEZvcm1EYXRhOiBmdW5jdGlvbiBnZXRBdHRhY2htZW50Rm9ybURhdGEoKSB7CiAgICAgIHZhciBfdGhpcyRhdHRhY2htZW50ID0gdGhpcy5hdHRhY2htZW50LAogICAgICAgICAgZmlsZXMgPSBfdGhpcyRhdHRhY2htZW50LmZpbGVzLAogICAgICAgICAgZGVsZXRlSWRzID0gX3RoaXMkYXR0YWNobWVudC5kZWxldGVJZHMsCiAgICAgICAgICBlbnRlcnByaXNlSWQgPSBfdGhpcyRhdHRhY2htZW50LmVudGVycHJpc2VJZDsKICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgiZW50ZXJwcmlzZUlkIiwgZW50ZXJwcmlzZUlkKTsKICAgICAgZmlsZXMubWFwKGZ1bmN0aW9uIChmaWxlSXRlbSkgewogICAgICAgIGZvcm1EYXRhLmFwcGVuZChmaWxlSXRlbS5rZXksIGZpbGVJdGVtLmZpbGUpOwogICAgICB9KTsKICAgICAgZm9ybURhdGEuYXBwZW5kKCJkZWxldGUiLCBkZWxldGVJZHMuam9pbignLCcpKTsKICAgICAgcmV0dXJuIGZvcm1EYXRhOwogICAgfSwKICAgIC8vIOafpeivoumZhOS7tuWIl+ihqAogICAgZmV0Y2hBdHRhY2htZW50RGF0YTogZnVuY3Rpb24gZmV0Y2hBdHRhY2htZW50RGF0YSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIF90aGlzJGNvbXBvbnlJbmZvOwoKICAgICAgICB2YXIgX3RoaXMkY29tcG9ueUluZm8yLCByZXNwLCBsaXN0OwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnMTEnICsgX3RoaXMuY29tcG9ueUluZm8pOwoKICAgICAgICAgICAgICAgIGlmICghKChfdGhpcyRjb21wb255SW5mbyA9IF90aGlzLmNvbXBvbnlJbmZvKSAhPT0gbnVsbCAmJiBfdGhpcyRjb21wb255SW5mbyAhPT0gdm9pZCAwICYmIF90aGlzJGNvbXBvbnlJbmZvLmlkKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0RW50ZXJwcmlzZUF0dGFjaG1lbnRDaXR5KHsKICAgICAgICAgICAgICAgICAgaWQ6IChfdGhpcyRjb21wb255SW5mbzIgPSBfdGhpcy5jb21wb255SW5mbykgPT09IG51bGwgfHwgX3RoaXMkY29tcG9ueUluZm8yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRjb21wb255SW5mbzIuaWQKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICByZXNwID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIGxpc3QgPSByZXNwID09PSBudWxsIHx8IHJlc3AgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlc3AuZGF0YS5tYXAoZnVuY3Rpb24gKGkpIHsKICAgICAgICAgICAgICAgICAgaS50eXBlID0gaS50eXBlLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICAgICAgICAgIHJldHVybiBpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBsaXN0Lm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuZm9ybS5oYXNPd25Qcm9wZXJ0eShpdGVtLnR5cGUpKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZm9ybVtpdGVtLnR5cGVdID0gaXRlbS5uYW1lOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGF0dGFjaG1lbnRMaXN0RGF0YUNvbTogZnVuY3Rpb24gYXR0YWNobWVudExpc3REYXRhQ29tKCkgewogICAgICByZXR1cm4gdGhpcy5hdHRhY2htZW50TGlzdERhdGE7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["C:/Users/001/Desktop/人才大脑图片/wxy/王飞/项目/web/src/views/personal/components/FileMixins.js"],"names":["getEnterpriseAttachmentCity","saveEnterpriseAttachment","data","attachmentListData","attachment","enterpriseId","files","deleteIds","mounted","fetchAttachmentData","methods","fileChange","e","key","input","target","file","value","form","name","keys","map","i","includes","push","getAttachmentFormData","formData","FormData","append","fileItem","join","console","log","componyInfo","id","resp","list","type","toLowerCase","item","hasOwnProperty","computed","attachmentListDataCom"],"mappings":"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","sourcesContent":["import { getEnterpriseAttachmentCity, saveEnterpriseAttachment } from \"@/api/personal\";\r\n//文件上传相关公共逻辑\r\nexport default {\r\n    data() {\r\n        return {\r\n            attachmentListData: [], // 接口查询的附件数据\r\n            attachment: {   //附件对象\r\n                enterpriseId: '',   //企业id\r\n                files: [\r\n                  // {\r\n                  //   key: '',    //文件key\r\n                  //   file: ''    //文件File流\r\n                  // }\r\n                ],\r\n                deleteIds: []  //要删除的文件id数组\r\n            },\r\n        }\r\n    },\r\n    mounted() {\r\n        this.fetchAttachmentData();\r\n    }, \r\n    methods: {\r\n        // 文件更新事件\r\n        fileChange(e,key) {\r\n            const input = e.target;\r\n            const [file] = input.files;\r\n            input.value = \"\";\r\n            this.form[key] = file.name;\r\n            let keys = this.attachment.files.map(i => i.key);\r\n            !keys.includes(key) && this.attachment.files.push({\r\n                key,\r\n                file\r\n            })\r\n            this.attachment.enterpriseId = e.enterpriseId;\r\n\r\n            saveEnterpriseAttachment(this.getAttachmentFormData())\r\n        },\r\n        // 获取附件数据\r\n        getAttachmentFormData() {\r\n            let {files,deleteIds,enterpriseId} = this.attachment;\r\n            const formData = new FormData();\r\n            formData.append(\"enterpriseId\", enterpriseId);\r\n            files.map(fileItem => {\r\n                formData.append(fileItem.key, fileItem.file);\r\n            })\r\n            formData.append(\"delete\", deleteIds.join(','));\r\n            return formData\r\n        },\r\n        // 查询附件列表\r\n        async fetchAttachmentData() {\r\n            console.log('11'+this.componyInfo);\r\n            if(this.componyInfo?.id) {\r\n                let resp = await getEnterpriseAttachmentCity({id: this.componyInfo?.id});\r\n                let list = resp?.data.map(i => {\r\n                    i.type = i.type.toLowerCase();\r\n                    return i;\r\n                })\r\n                list.map(item => {\r\n                    if (this.form.hasOwnProperty(item.type)) {\r\n                        this.form[item.type] = item.name;\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    },\r\n    computed: {\r\n        attachmentListDataCom() {\r\n            return this.attachmentListData;\r\n        }\r\n    }\r\n}"]}]}