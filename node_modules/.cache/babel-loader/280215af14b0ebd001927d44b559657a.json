{"remainingRequest":"E:\\work\\2022-07-21人才服务网改造最新\\talent-web\\node_modules\\babel-loader\\lib\\index.js!E:\\work\\2022-07-21人才服务网改造最新\\talent-web\\src\\views\\personal\\components\\FileMixins.js","dependencies":[{"path":"E:\\work\\2022-07-21人才服务网改造最新\\talent-web\\src\\views\\personal\\components\\FileMixins.js","mtime":1658367490877},{"path":"E:\\work\\2022-07-21人才服务网改造最新\\talent-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\work\\2022-07-21人才服务网改造最新\\talent-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkU6L3dvcmsvMjAyMi0wNy0yMVx1NEVCQVx1NjI0RFx1NjcwRFx1NTJBMVx1N0Y1MVx1NjUzOVx1OTAyMFx1NjcwMFx1NjVCMC90YWxlbnQtd2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIkU6L3dvcmsvMjAyMi0wNy0yMVx1NEVCQVx1NjI0RFx1NjcwRFx1NTJBMVx1N0Y1MVx1NjUzOVx1OTAyMFx1NjcwMFx1NjVCMC90YWxlbnQtd2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5IjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luLmpzIjsKaW1wb3J0IHsgZ2V0RW50ZXJwcmlzZUF0dGFjaG1lbnRDaXR5LCBzYXZlRW50ZXJwcmlzZUF0dGFjaG1lbnQgfSBmcm9tICJAL2FwaS9wZXJzb25hbCI7IC8v5paH5Lu25LiK5Lyg55u45YWz5YWs5YWx6YC76L6RCgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGF0dGFjaG1lbnRMaXN0RGF0YTogW10sCiAgICAgIC8vIOaOpeWPo+afpeivoueahOmZhOS7tuaVsOaNrgogICAgICBhdHRhY2htZW50OiB7CiAgICAgICAgLy/pmYTku7blr7nosaEKICAgICAgICBlbnRlcnByaXNlSWQ6ICcnLAogICAgICAgIC8v5LyB5LiaaWQKICAgICAgICBmaWxlczogWy8vIHsKICAgICAgICAgIC8vICAga2V5OiAnJywgICAgLy/mlofku7ZrZXkKICAgICAgICAgIC8vICAgZmlsZTogJycgICAgLy/mlofku7ZGaWxl5rWBCiAgICAgICAgICAvLyB9CiAgICAgICAgXSwKICAgICAgICBkZWxldGVJZHM6IFtdIC8v6KaB5Yig6Zmk55qE5paH5Lu2aWTmlbDnu4QKCiAgICAgIH0KICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5mZXRjaEF0dGFjaG1lbnREYXRhKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDmlofku7bmm7TmlrDkuovku7YKICAgIGZpbGVDaGFuZ2U6IGZ1bmN0aW9uIGZpbGVDaGFuZ2UoZSwga2V5KSB7CiAgICAgIHZhciBpbnB1dCA9IGUudGFyZ2V0OwoKICAgICAgdmFyIF9pbnB1dCRmaWxlcyA9IF9zbGljZWRUb0FycmF5KGlucHV0LmZpbGVzLCAxKSwKICAgICAgICAgIGZpbGUgPSBfaW5wdXQkZmlsZXNbMF07CgogICAgICBpbnB1dC52YWx1ZSA9ICIiOwogICAgICB0aGlzLmZvcm1ba2V5XSA9IGZpbGUubmFtZTsKICAgICAgdmFyIGtleXMgPSB0aGlzLmF0dGFjaG1lbnQuZmlsZXMubWFwKGZ1bmN0aW9uIChpKSB7CiAgICAgICAgcmV0dXJuIGkua2V5OwogICAgICB9KTsKICAgICAgIWtleXMuaW5jbHVkZXMoa2V5KSAmJiB0aGlzLmF0dGFjaG1lbnQuZmlsZXMucHVzaCh7CiAgICAgICAga2V5OiBrZXksCiAgICAgICAgZmlsZTogZmlsZQogICAgICB9KTsKICAgICAgdGhpcy5hdHRhY2htZW50LmVudGVycHJpc2VJZCA9IGUuZW50ZXJwcmlzZUlkOwogICAgICBzYXZlRW50ZXJwcmlzZUF0dGFjaG1lbnQodGhpcy5nZXRBdHRhY2htZW50Rm9ybURhdGEoKSk7CiAgICB9LAogICAgLy8g6I635Y+W6ZmE5Lu25pWw5o2uCiAgICBnZXRBdHRhY2htZW50Rm9ybURhdGE6IGZ1bmN0aW9uIGdldEF0dGFjaG1lbnRGb3JtRGF0YSgpIHsKICAgICAgdmFyIF90aGlzJGF0dGFjaG1lbnQgPSB0aGlzLmF0dGFjaG1lbnQsCiAgICAgICAgICBmaWxlcyA9IF90aGlzJGF0dGFjaG1lbnQuZmlsZXMsCiAgICAgICAgICBkZWxldGVJZHMgPSBfdGhpcyRhdHRhY2htZW50LmRlbGV0ZUlkcywKICAgICAgICAgIGVudGVycHJpc2VJZCA9IF90aGlzJGF0dGFjaG1lbnQuZW50ZXJwcmlzZUlkOwogICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgZm9ybURhdGEuYXBwZW5kKCJlbnRlcnByaXNlSWQiLCBlbnRlcnByaXNlSWQpOwogICAgICBmaWxlcy5tYXAoZnVuY3Rpb24gKGZpbGVJdGVtKSB7CiAgICAgICAgZm9ybURhdGEuYXBwZW5kKGZpbGVJdGVtLmtleSwgZmlsZUl0ZW0uZmlsZSk7CiAgICAgIH0pOwogICAgICBmb3JtRGF0YS5hcHBlbmQoImRlbGV0ZSIsIGRlbGV0ZUlkcy5qb2luKCcsJykpOwogICAgICByZXR1cm4gZm9ybURhdGE7CiAgICB9LAogICAgLy8g5p+l6K+i6ZmE5Lu25YiX6KGoCiAgICBmZXRjaEF0dGFjaG1lbnREYXRhOiBmdW5jdGlvbiBmZXRjaEF0dGFjaG1lbnREYXRhKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgX3RoaXMkY29tcG9ueUluZm87CgogICAgICAgIHZhciBfdGhpcyRjb21wb255SW5mbzIsIHJlc3AsIGxpc3Q7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCcxMScgKyBfdGhpcy5jb21wb255SW5mbyk7CgogICAgICAgICAgICAgICAgaWYgKCEoKF90aGlzJGNvbXBvbnlJbmZvID0gX3RoaXMuY29tcG9ueUluZm8pICE9PSBudWxsICYmIF90aGlzJGNvbXBvbnlJbmZvICE9PSB2b2lkIDAgJiYgX3RoaXMkY29tcG9ueUluZm8uaWQpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBnZXRFbnRlcnByaXNlQXR0YWNobWVudENpdHkoewogICAgICAgICAgICAgICAgICBpZDogKF90aGlzJGNvbXBvbnlJbmZvMiA9IF90aGlzLmNvbXBvbnlJbmZvKSA9PT0gbnVsbCB8fCBfdGhpcyRjb21wb255SW5mbzIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGNvbXBvbnlJbmZvMi5pZAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIHJlc3AgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgbGlzdCA9IHJlc3AgPT09IG51bGwgfHwgcmVzcCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVzcC5kYXRhLm1hcChmdW5jdGlvbiAoaSkgewogICAgICAgICAgICAgICAgICBpLnR5cGUgPSBpLnR5cGUudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGxpc3QubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5mb3JtLmhhc093blByb3BlcnR5KGl0ZW0udHlwZSkpIHsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5mb3JtW2l0ZW0udHlwZV0gPSBpdGVtLm5hbWU7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgYXR0YWNobWVudExpc3REYXRhQ29tOiBmdW5jdGlvbiBhdHRhY2htZW50TGlzdERhdGFDb20oKSB7CiAgICAgIHJldHVybiB0aGlzLmF0dGFjaG1lbnRMaXN0RGF0YTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["E:/work/2022-07-21人才服务网改造最新/talent-web/src/views/personal/components/FileMixins.js"],"names":["getEnterpriseAttachmentCity","saveEnterpriseAttachment","data","attachmentListData","attachment","enterpriseId","files","deleteIds","mounted","fetchAttachmentData","methods","fileChange","e","key","input","target","file","value","form","name","keys","map","i","includes","push","getAttachmentFormData","formData","FormData","append","fileItem","join","console","log","componyInfo","id","resp","list","type","toLowerCase","item","hasOwnProperty","computed","attachmentListDataCom"],"mappings":"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","sourcesContent":["import { getEnterpriseAttachmentCity, saveEnterpriseAttachment } from \"@/api/personal\";\r\n//文件上传相关公共逻辑\r\nexport default {\r\n    data() {\r\n        return {\r\n            attachmentListData: [], // 接口查询的附件数据\r\n            attachment: {   //附件对象\r\n                enterpriseId: '',   //企业id\r\n                files: [\r\n                  // {\r\n                  //   key: '',    //文件key\r\n                  //   file: ''    //文件File流\r\n                  // }\r\n                ],\r\n                deleteIds: []  //要删除的文件id数组\r\n            },\r\n        }\r\n    },\r\n    mounted() {\r\n        this.fetchAttachmentData();\r\n    }, \r\n    methods: {\r\n        // 文件更新事件\r\n        fileChange(e,key) {\r\n            const input = e.target;\r\n            const [file] = input.files;\r\n            input.value = \"\";\r\n            this.form[key] = file.name;\r\n            let keys = this.attachment.files.map(i => i.key);\r\n            !keys.includes(key) && this.attachment.files.push({\r\n                key,\r\n                file\r\n            })\r\n            this.attachment.enterpriseId = e.enterpriseId;\r\n\r\n            saveEnterpriseAttachment(this.getAttachmentFormData())\r\n        },\r\n        // 获取附件数据\r\n        getAttachmentFormData() {\r\n            let {files,deleteIds,enterpriseId} = this.attachment;\r\n            const formData = new FormData();\r\n            formData.append(\"enterpriseId\", enterpriseId);\r\n            files.map(fileItem => {\r\n                formData.append(fileItem.key, fileItem.file);\r\n            })\r\n            formData.append(\"delete\", deleteIds.join(','));\r\n            return formData\r\n        },\r\n        // 查询附件列表\r\n        async fetchAttachmentData() {\r\n            console.log('11'+this.componyInfo);\r\n            if(this.componyInfo?.id) {\r\n                let resp = await getEnterpriseAttachmentCity({id: this.componyInfo?.id});\r\n                let list = resp?.data.map(i => {\r\n                    i.type = i.type.toLowerCase();\r\n                    return i;\r\n                })\r\n                list.map(item => {\r\n                    if (this.form.hasOwnProperty(item.type)) {\r\n                        this.form[item.type] = item.name;\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    },\r\n    computed: {\r\n        attachmentListDataCom() {\r\n            return this.attachmentListData;\r\n        }\r\n    }\r\n}"]}]}